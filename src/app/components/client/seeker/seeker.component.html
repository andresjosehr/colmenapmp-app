<div fxHide.gt-md (click)='menuCheck.setValue(!menuCheck.value)' id="show-sidebar" [style]='!menuCheck.value ? "transform: translateX(-35px);" : ""'>
    <mat-icon for='menu-check' style="margin-top: 6px; margin-left: 7px;color: white;">keyboard_arrow_right</mat-icon>
</div>
<input fxHide [formControl]='menuCheck' type="checkbox" />
<section class="plan-seeker max-width">
    <div fxLayout='row warp' fxLayoutGap='20px grid'>
        <div fxFlex='25'>
            <div #searchMain class="search-menu-container" [style]='!menuCheck.value ? "transform: translateX(0px)" : ""'>
                <div fxHide.gt-md style="display: flex; justify-content: space-between;margin-bottom: 10px">
                    <mat-card class='plan-card result-count' style="width: 40%; height: fit-content;">
                        <div style="padding: 7px 10px;">
                            <span class="results-text" style='margin-bottom: 0px'>Resultados:</span>
                            <span style='font-size: 21px;' *ngIf='plans' class="amount">{{plans.length}}</span>
                            <span style='font-size: 21px;' *ngIf='!plans' class="amount">0</span>
                        </div>
                    </mat-card>
                    <mat-card class='plan-card result-count' style="width: 40%; height: fit-content;">
                        <div style="padding: 7px 10px;">
                            <span class="results-text" style='margin-bottom: 0px'>Tu 7% es de:</span>
                            <span style='line-height: 1; position: absolute; margin-top: -57px; color: #8c8c8c; text-align: center; margin-left: 5px;' *ngIf='getTopeImponibleCPL()==sietePorciento' class="results-text">(Tope imponible)</span>
                            <span class="amount">${{sietePorciento | number:'.0-0':'es'}}</span>
                            <!-- <span *ngIf='!plans' class="amount">$0</span> -->
                        </div>
                    </mat-card>
                    <div (click)='menuCheck.setValue(true)' style="text-align: right; margin-bottom: 10px;">
                        <button mat-icon-button aria-label="Cerrar">
                            <mat-icon>close</mat-icon>
                        </button>
                    </div>
                </div>
                <mat-card class="search-section">
                    <!-- Starts beneficiary section -->
                    <div class="beneficiary">
                        <div class="beneficiary-header">
                            <div style="display: flex;justify-content: space-between;width: 100%;">
                                <div>
                                    <span class="search-section-title">Ingresa tu perfil</span>
                                </div>
                                <div class="user-sex">
                                    <div class="radio-toggles">
                                        <input [(ngModel)]="userGender" type="radio" id="usex-sex-mujer" name="user-sex" value='Mujer'>
                                        <label class="charge-label" for="usex-sex-mujer">Mujer</label>
                                        <input [(ngModel)]="userGender" type="radio" id="usex-sex-hombre" name="user-sex" value='Hombre'>
                                        <label class="beneficiary-label" for="usex-sex-hombre">Hombre</label>
                                        <div class="slide-item"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="profile" fxLayout='row warp' fxLayoutGap="0px grid" [formGroup]='userProfileFormGroup'>
                            <!-- <div fxFlex='70' class="profile-field-container">
                                <div class="w-100">
                                    <label class='input-label' for="region_id">Región : </label>
                                    <mat-form-field style="font-size: 12px;" class="w-100">
                                        <mat-select id='for="region_id"' formControlName='region_id'>
                                            <mat-option *ngFor='let region of regions' [value]='region.id'>{{region.code}} {{region.name | titlecase}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div> -->
                            <div fxFlex='30' class="profile-field-container">
                                <div class="w-100">
                                    <label class='input-label' for="age">Edad: </label>
                                    <mat-form-field style="font-size: 12px;" class="w-100">
                                        <input id='age' formControlName='age' matInput>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div fxFlex='70' class="profile-field-container">
                                <div class="w-100" style='margin-top: 5px;'>
                                    <label class='input-label' for="monthly_liquid_income">Ingreso Mensual Líquido: </label>
                                    <mat-form-field style="font-size: 12px;" class="w-100">
                                        <input id='monthly_liquid_income' (keypress)="numberOnly($event)" formControlName='monthly_liquid_income' matInput>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div *ngIf='this.suscriptionPrices' class="user-fb" fxFlex="100">
                                Tu factor base: {{ this.suscriptionPrices[this.userProfileFormGroup.get("age")?.value || 0]?.contributor_price}}
                            </div>
                        </div>
                        <mat-divider style='margin: 14px auto !important;border-top-width: 2px;'></mat-divider>
                        <div class="beneficiary-header">
                            <div style="display: flex;justify-content: space-between;width: 100%;">
                                <div style="margin-top:-2px" [formGroup]='userProfileFormGroup'>
                                    <span class="search-section-title">
                                        <mat-checkbox formControlName='couple'>En pareja</mat-checkbox>
                                    </span>
                                </div>
                                <div class="user-sex" *ngIf='userProfileFormGroup.get("couple")?.value' [@inOutAnimation]>
                                    <div class="radio-toggles">
                                        <input [(ngModel)]="coupleGender" type="radio" id="couple-sex-mujer" name="couple-sex" value='Mujer'>
                                        <label class="charge-label" for="couple-sex-mujer">Mujer</label>
                                        <input [(ngModel)]="coupleGender" type="radio" id="couple-sex-hombre" name="couple-sex" value='Hombre'>
                                        <label class="beneficiary-label" for="couple-sex-hombre">Hombre</label>
                                        <div class="slide-item"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf='userProfileFormGroup.get("couple")?.value' [@inOutAnimation] class="profile" fxLayout='row warp' fxLayoutGap="0px grid" [formGroup]='coupleProfileFormGroup'>
                            <div fxFlex='40' class="profile-field-container">
                                <div class="w-100">
                                    <label class='input-label' for="age">Edad: </label>
                                    <mat-form-field style="font-size: 12px;" class="w-100">
                                        <input id="couple_age" formControlName='age' matInput>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div fxFlex='60' class="profile-field-container">
                                <div class="w-100">
                                    <label class='input-label' for="monthly_liquid_income">Ingreso Mensual Líquido: </label>
                                    <mat-form-field style="font-size: 12px;" class="w-100">
                                        <input id="couple_monthly_liquid_income" (keypress)="numberOnly($event)" formControlName='monthly_liquid_income' matInput>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="user-fb" fxFlex="100">
                                El factor base de tu pareja es: {{ this.suscriptionPrices[this.coupleProfileFormGroup.get("age")?.value || 0][this.formatPrice(this.coupleProfileFormGroup.get("monthly_liquid_income")?.value) > 0 ? "contributor_price" : "burden_price"]}}
                            </div>
                        </div>
                    </div>
                    <!-- Ends beneficiary section -->
                </mat-card>
                <mat-card class="search-section">
                    <!-- Starts beneficiary section -->
                    <div class="beneficiary">
                        <div class="beneficiary-header">
                            <span class="search-section-title">Cargas</span>
                            <div>
                                <button class="add-beneficiary-btn" mat-button (click)='addBurden()'>
                                <mat-icon class='add-beneficiary-icon'>person_add</mat-icon>
                                    Añadir Carga
                                </button>
                            </div>
                        </div>
                        <div class="beneficiary-thead">
                            <span style="width: 24%;">Edad</span>
                            <span style="width: 45%;">Tipo</span>
                            <span style="width: 16%;">FB</span>
                            <span></span>
                        </div>
                        <div class="beneficiary-tbody" *ngFor='let burden of burdens; let i = index' [@inOutAnimation]>
                            <div class='age-container'>
                                <button (click)='changeBurdenAge(burden.id, burden.age-1)' class="age-btn"><span>-</span></button>
                                <input (keyup)='chageBurdenAgeKeyUp($event.target, burden.id)' type="text" [value]='burden.age'>
                                <button (click)='changeBurdenAge(burden.id, burden.age+1)' class="age-btn"><span>+</span></button>
                            </div>
                            <div class="radio-toggles">
                                <input (change)='changeBurdenGender(burden.id, "Mujer")' type="radio" [id]="'charge-'+burden.id" [name]="'beneficiaries-'+burden.id">
                                <label class="charge-label" [for]="'charge-'+burden.id">Mujer</label>
                                <input (change)='changeBurdenGender(burden.id, "Hombre")' type="radio" [id]="'beneficiary-'+burden.id" [name]="'beneficiaries-'+burden.id" checked>
                                <label class="beneficiary-label" [for]="'beneficiary-'+burden.id">Hombre</label>
                                <div class="slide-item"></div>
                            </div>
                            <div>
                                <span style='font-size: 10px; font-weight: 500; background: #e8e8e8; padding: 4px 11px; border-radius: 5px;'>{{burden.suscriptionPrice}}</span>
                            </div>
                            <div>
                                <mat-icon (click)='removeBurden(burden)' class="remove-beneficiary">close</mat-icon>
                            </div>
                        </div>
                        <div class="add-beneficiary-text" *ngIf='burdens.length==0' [@inOutAnimation]>¡Añade una carga!</div>
                    </div>
                    <!-- Ends beneficiary section -->
                </mat-card>
                <!-- Starts price range section -->
                <mat-card class="search-section" [ngStyle]='{
                    border: getMinPrice() <  get10percent() ? "5px solid rgba(255, 227, 138, 1);" : "5px solid rgba(255, 227, 138, 0);",
                    padding: "11px !important"
                    }'>
                    <div class="price-range">
                        <div class="price-range-header">
                            <span class="search-section-title">Rango de precio</span>
                        </div>
                        <div class='range-inputs-container'>
                            <div *ngIf='priceRangeFormGroup' class="range-inputs" [formGroup]='priceRangeFormGroup'>
                                <div>
                                    <label>Mínimo</label> <br>
                                    <input formControlName='minValue' type="text">
                                    <input formControlName='minValueHide' type="hidden" [(ngModel)]="minValue">
                                </div>
                                <div>
                                    <label>Máximo</label> <br>
                                    <input formControlName='maxValue' type="text">
                                    <input formControlName='maxValueHide' type="hidden" [(ngModel)]="maxValue">
                                </div>
                            </div>

                            <ngx-slider (userChangeEnd)="onUserChangePriceEnd()" [(value)]="minValue" [(highValue)]="maxValue" [options]="options"></ngx-slider>
                            <!-- (valueChange)='this.plans.data=null; seekerObservable$.next(true)' -->

                        </div>
                    </div>

                    <div *ngIf='this.sietePorciento' [@inOutAnimationAlert] style='text-align: center;'>
                        <div class="alert alert-success" role="alert">
                            <div>
                                Tu 7% estimado: <span class="alert-link">${{this.sietePorciento | number:'.0-0':'es'}} ({{(this.sietePorciento / metadata[0].value)  | number:'.0-2':'es'}} UF).</span><br>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 10px;" *ngIf='getMinPrice() <  get10percent()' [@inOutAnimationAlert]>
                        <div class="alert alert-warning" role="alert">
                            <div>
                                <span class="alert-link">Precio mínimo muy bajo.</span> Legalmente no puedes generar más de 10% de excedentes. <br>
                            </div>

                            <div style="margin-top: 10px;"> El precio mínimo por ley segun tus ingresos es de
                                <span class="alert-link">${{get10percent() | number:'.0-0':'es'}}</span>
                            </div>

                            <div style="margin-top: 10px; text-align: center;">
                                <button mat-stroked-button (click)='this.priceRangeFormGroup.get("minValueHide")?.setValue(get10percent())'>
                                    <span class="alert-link">Ajustar precio minimo</span>
                                </button>
                            </div>
                        </div>

                    </div>
                </mat-card>


                <!-- Starts region section -->
                <mat-card class="search-section">
                    <div class="clinic">
                        <div class="clinic-header">
                            <div>
                                <span class="search-section-title">Regiones</span>
                            </div>
                            <div>
                                <button mat-stroked-button (click)='checkUncheckRegions()'>
                                    
  
                                <span *ngIf='!checkRegions'>Desmarcar Todo</span>
                                <span *ngIf='checkRegions'>Marcar Todo</span>                                
                            </button>
                            </div>
                        </div>

                        <!-- <mat-option *ngFor='let region of regions' [value]='region.id'>{{region.code}} {{region.name | titlecase}}</mat-option> -->

                        <div *ngIf='regionsFormGroup' class="clinic-container" [formGroup]='regionsFormGroup'>
                            <mat-selection-list formControlName='regions'>
                                <ng-container *ngFor="let region of regions">
                                    <mat-list-option [value]='region.id'>
                                        <span *ngTippy='{content: region.name}' style="font-size: 12px;">
                                            {{region.code}} {{ region.name | titlecase}}
                                        </span>
                                    </mat-list-option>


                                </ng-container>
                            </mat-selection-list>
                        </div>
                    </div>
                </mat-card>
                <!-- Ends region section -->




                <!-- Starts clinic section -->
                <mat-card class="search-section">
                    <div class="clinic">
                        <div class="clinic-header">
                            <div>
                                <span class="search-section-title">Proveedores</span>
                            </div>
                            <div>
                                <button mat-stroked-button (click)='checkUncheckProviders()'>
                                    
  
                                <span *ngIf='!checkProviders'>Desmarcar Todo</span>
                                <span *ngIf='checkProviders'>Marcar Todo</span>                                
                            </button>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <mat-form-field style="width: 84%; margin-top: 20px;">
                                <mat-label>Buscar Proveedor</mat-label>
                                <input [formControl]='searchProviders' matInput>
                            </mat-form-field>
                        </div>

                        <div *ngIf='providersFormGroup' class="clinic-container" [formGroup]='providersFormGroup'>
                            <mat-selection-list formControlName='providers'>
                                <ng-container *ngFor="let provider of providersFiltered">
                                    <mat-list-option [value]='provider.id'>
                                        <span *ngTippy='{content: provider.name}' style="font-size: 12px;">
                                            {{ ((provider.name.length>25) ? (provider.name | slice:0:25 | titlecase)+'...' : (provider.name | titlecase)) }}
                                        </span>
                                    </mat-list-option>


                                </ng-container>
                            </mat-selection-list>
                        </div>
                    </div>
                </mat-card>
                <!-- Ends clinic section -->


                <mat-card class="search-section">
                    <!-- Starts isapre section -->
                    <!-- <div class="isapres">
                        <div class="isapres-header">
                            <span class="search-section-title">Isapres</span>
                        </div>

                        <div *ngIf='isapresFormGroup' class="checkbox-group" [formGroup]='isapresFormGroup'>

                            <ng-container *ngFor='let isapre of isapres'>
                                <div *ngIf='isapre.show_for_seek==1' class="checkbox">
                                    <label class="checkbox-wrapper">
                                        <input [formControlName]='isapre.id || null' type="checkbox" class="checkbox-input" checked />
                                        <span class="checkbox-tile">
                                            <span class="checkbox-icon">
                                                <img [src]="environment.assetsServerUrl+'/images/isapres/'+isapre.logo" [alt]="isapre.name">
                                            </span>
                                            <span class="checkbox-label">{{isapre.name}}</span>
                                        </span>
                                    </label>
                                </div>
                            </ng-container>




                        </div>
                    </div> -->
                    <!-- Ends isapre section -->

                </mat-card>

                <mat-card class="search-section" style='margin-bottom: 10px;'>


                    <!-- Starts plan type section -->
                    <div class="plan-type">
                        <div class="plan-type-header">
                            <span class="search-section-title">Tipo de plan</span>
                        </div>

                        <div *ngIf='planTypesFormGroup' class="custom-choose mb-3" [formGroup]='planTypesFormGroup'>
                            <ng-container *ngFor='let planType of planTypes; let i = index'>
                                <div>
                                    <input [formControlName]='planType.id' [id]="planType.name+planType.id" [value]="planType.id" type="checkbox">
                                    <label *ngTippy='{content: planDescriptions[i]}' [for]="planType.name+planType.id">{{planType.name}} </label>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <!-- Ends plan type section -->
                </mat-card>

                <div *ngIf='!menuCheck.value || this.innerWidth > 1279' class="search-btn" style='margin-bottom: 40px;'>
                    <button class='seek-btn' (click)='seekPlans()' mat-button>
                        Buscar
                    </button>
                </div>

            </div>

        </div>
        <div [@planAnimations]="plans?.data && getProfileValid() ? 'in' : 'out'" (@planAnimations.done)="splashScreenStateService.stop()" fxFlex.gt-md='75' fxFlex.lt-lg='100'>
            <div class='seeker-main' #seekerMain fxLayout="row wrap" fxLayoutGap="20px grid">
                <div fxFlex='16' class='seach-options' fxHide.lt-md>
                    <mat-card class='plan-card result-count'>
                        <div>
                            <span class="results-text">Resultados:</span>
                            <span *ngIf='plans' class="amount">{{plans.length}}</span>
                            <span *ngIf='!plans' class="amount">0</span>
                        </div>
                    </mat-card>
                </div>
                <div fxFlex='16' class='seach-options' fxHide.lt-md>
                    <mat-card class='plan-card result-count'>
                        <div>
                            <span class="results-text">Tu 7% es de:</span>
                            <span style='line-height: 1; position: absolute; margin-top: -57px; color: #8c8c8c; text-align: center; margin-left: 5px;' *ngIf='getTopeImponibleCPL()==sietePorciento' class="results-text">(Tope imponible)</span>
                            <span class="amount">${{sietePorciento | number:'.0-0':'es'}}</span>
                        </div>
                    </mat-card>
                </div>

                <div fxFlex='18' class='seach-options' fxHide.lt-md>
                    <mat-card class='plan-card result-count'>
                        <div>
                            <span class="results-text">Valor UF Actual:</span>
                            <span style='line-height: 1; position: absolute; margin-top: -57px; color: #8c8c8c; text-align: center; margin-left: 5px;' *ngIf='getTopeImponibleCPL()==sietePorciento' class="results-text">(Tope imponible)</span>
                            <span *ngIf='metadata' class="amount">${{metadata[0].value | number:'.0-0':'es'}}</span>
                            <span *ngIf='!metadata' class="amount"> - </span>
                        </div>
                    </mat-card>
                </div>
                <div fxFlex='50' class='seach-options' fxFlex.lt-md=100 style='z-index: 8;position: relative;'>
                    <mat-card class="contact-section" style='padding: 4px 15px 12px;margin-bottom: 0px;'>
                        <div style="text-align:left">
                            <span class="results-text asesoria-text">Asesoría Personalizada:</span>
                            <div class="amount" style='display: flex;justify-content: space-between; color: white'>
                                <button (click)='goToLink("http://wa.me/+56995285187")' style='width: 32%; color: white; height: 30px; line-height:1' mat-raised-button>
                                        <svg class='whatsapp-icon' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path style='fill: white;' d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01A9.816 9.816 0 0 0 12.04 2m.01 1.67c2.2 0 4.26.86 5.82 2.42a8.225 8.225 0 0 1 2.41 5.83c0 4.54-3.7 8.23-8.24 8.23c-1.48 0-2.93-.39-4.19-1.15l-.3-.17l-3.12.82l.83-3.04l-.2-.32a8.188 8.188 0 0 1-1.26-4.38c.01-4.54 3.7-8.24 8.25-8.24M8.53 7.33c-.16 0-.43.06-.66.31c-.22.25-.87.86-.87 2.07c0 1.22.89 2.39 1 2.56c.14.17 1.76 2.67 4.25 3.73c.59.27 1.05.42 1.41.53c.59.19 1.13.16 1.56.1c.48-.07 1.46-.6 1.67-1.18c.21-.58.21-1.07.15-1.18c-.07-.1-.23-.16-.48-.27c-.25-.14-1.47-.74-1.69-.82c-.23-.08-.37-.12-.56.12c-.16.25-.64.81-.78.97c-.15.17-.29.19-.53.07c-.26-.13-1.06-.39-2-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.12-.24-.01-.39.11-.5c.11-.11.27-.29.37-.44c.13-.14.17-.25.25-.41c.08-.17.04-.31-.02-.43c-.06-.11-.56-1.35-.77-1.84c-.2-.48-.4-.42-.56-.43c-.14 0-.3-.01-.47-.01z" fill="#626262"/><rect x="0" y="0" width="24" height="24" fill="rgba(0, 0, 0, 0)" /></svg>
                                        <span fxHide.lt-sm>Whatsapp</span>
                                </button>
                                <button (click)='openContactForm(undefined)' style='width: 32%; color: white; height: 30px; line-height:1' mat-raised-button>
                                        <mat-icon> mail_outline</mat-icon>
                                        <span fxHide.lt-sm>Formulario</span>
                                </button>
                                <button (click)='goToLink("tel:+56995285187")' style='width: 32%; color: white; height: 30px; line-height:1' mat-raised-button>
                                        <mat-icon>phone_in_talk</mat-icon>
                                        <span fxHide.lt-sm>Llamada</span>
                                </button>

                            </div>
                        </div>
                    </mat-card>
                </div>

                <ng-container>
                    <!-- *ngIf='!plans?.data' [@inOutAnimationSpinner]="!plans?.data ? 'in' : 'out'" -->
                    <div *ngIf='(getProfileValid() && (plans!==undefined) && (plans?.data?.length!==0)) || plans===undefined' fxFlex='100' style='position: absolute; left: 0; right: 0; margin: auto;'>
                        <mat-spinner style='margin: 200px auto;z-index: 0;'></mat-spinner>
                    </div>

                    <div *ngIf='plans && plans?.data?.length===0' fxFlex='100' class='main-messsage'>
                        <mat-card>
                            <div>
                                No hemos encontrado planes con tu criterio de busqueda
                            </div>
                        </mat-card>
                    </div>

                    <div class='plan-animation' fxFlex='100' fxFlex.lt-md='50' fxFlex.lt-sm="100" *ngFor="let plan of plans | paginate: { id: 'plans', itemsPerPage :15, currentPage: p || 0, totalItems: plans?.total || 0}">
                        <mat-card class='plan-card plan-card-real' matBadge="!" matBadgeColor='warn' matBadgeSize="large" [matBadgeHidden]="plan.price >= this.get10percent()" [ngStyle]='{border: plan.price < this.get10percent() ? "5px solid #f44336" : "5px solid white"}'>
                            <div class="plan-container">
                                <div fxLayout='row warp' fxLayoutGap='20px grid'>
                                    <div fxFlex=100 style="text-align:center;">
                                        <div class='plan-name-container'>
                                            <h3 class="plan-name">{{plan.name | titlecase}}</h3>
                                        </div>
                                        <mat-divider style="margin: 14px auto !important;margin-bottom: 10px !important;width: 100% !important;"></mat-divider>
                                    </div>
                                    <div fxFlex=30>
                                        <div style='text-align:center'>
                                            <div style='margin-top:40px'>
                                                <div class="price" style="margin-bottom: 11px 0;">
                                                    <span class="amount">${{plan.price | number:'.0-0':'es'}}</span>
                                                    <span class="period">/mes</span>
                                                </div>
                                                <div class='excedente'>
                                                    <!-- <mat-icon style="font-size: 22px;"> monetization_on</mat-icon> -->
                                                    <span style="display: block; margin-top: 2px;" *ngIf='getExcedent(plan.price)>0'>Genera ${{getExcedent(plan.price)  | number:'.0-0':'es'}} de excedentes</span>
                                                    <span style="display: block; margin-top: 2px;" *ngIf='getExcedent(plan.price)<0'>No genera excedente</span>
                                                </div>
                                                <div [id]='"isapre-benefits-"+plan.isapre?.id' style='margin-top: 18px;'>
                                                    <button style='line-height: 1;padding: 3px 15px;font-size: 12px;' mat-stroked-button>Beneficios</button>
                                                </div>
                                            </div>
                                        </div>        
                                    </div>
                                    <div fxFlex='50'>
                                        <div class="mid-container">
                                            <div class="hospitalizacion-box">
                                                <ul style="list-style: none;padding: 0;font-size: 12px;font-weight: 500;color: #8c8c8c;margin-top: 0;">
                                                    <div>
                                                        <li class="provider-name" style="margin-bottom: 8px;">
                                                            <div class='search-section-title' style="width: 70%;">
                                                                Clinica/Hospital
                                                            </div>
                                                            <div style="width: 30%; display: flex;justify-content: space-between;">
                                                                <div class='search-section-title'>Hosp.</div>
                                                                <div class='search-section-title'>Amb.</div>
                                                            </div>
                                                        </li>
                                                    </div>
                                                    <div>
                                                        <ng-container *ngFor='let providerFormated of formatProvidersForShow(plan); let i = index'>
                                                            <li *ngIf='providerFormated.provider_data' [class]="providersFormGroup.get('providers')?.value.length < 4 && checkProviderFeature(providerFormated) ? 'provider-name-feature provider-name':'provider-name'">
                                                                <div style="width: 70%;" *ngTippy='{content: providerFormated.provider_data.name}'>
                                                                    <mat-icon style="margin-right:5px;font-size: 12px;width: 12px;height: 12px;color: #24b300;">check_circle_outline</mat-icon> 
                                                                    {{ ((providerFormated.provider_data.name.length>40) ? ((providerFormated.provider_data.name) | slice:0:40 | titlecase)+'...' : (providerFormated.provider_data.name | titlecase)) }}
                                                                </div>
                                                                <div style="width: 30%; display: flex;justify-content: space-between;">
                                                                    <div *ngIf='this.round5(providerFormated.percentage_hospitable)!=0'>{{this.round5(providerFormated.percentage_hospitable || 10)}}%</div>
                                                                    <div *ngIf='this.round5(providerFormated.percentage_hospitable)==0'>N/A</div>

                                                                    <div *ngIf='this.round5(providerFormated.percentage_ambulatory)!=0'>{{this.round5(providerFormated.percentage_ambulatory || 10)}}%</div>
                                                                    <div *ngIf='this.round5(providerFormated.percentage_ambulatory)==0'>N/A</div>
                                                                </div>
                                                                <div>

                                                                </div>
                                                            </li>
                                                        </ng-container>
                                                    </div>

                                                    <!-- <mat-icon> vertical_align_top</mat-icon> -->



                                                    <li class="provider-name" style='justify-content: center !important;font-size: 18px;margin: 25px;' *ngIf='plan.providers.length < 1'>
                                                        <div>
                                                            <mat-icon style="margin-right:5px;font-size: 12px;width: 12px;height: 12px;color: #24b300;">check_circle_outline</mat-icon>
                                                        </div>
                                                        Todos los proveedores incluidos
                                                    </li>

                                                    <li class="provider-name" style="margin-bottom: -10px; margin-top: 12px;">
                                                        <div class='search-section-title' style="width: 100%; justify-content: center; display: flex;">
                                                            <mat-icon style="font-size: 20px;"> vertical_align_top</mat-icon>
                                                            <div style="margin-top: 4px;">
                                                                Tope Anual {{plan.annual_limit | number:'.0-2':'es'}} UF
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div fxFlex='20'>
                                        <div class="plans-info-btn">
                                            <div style="width: 100%;margin-top: 10px">
                                                <span class="isapre-name">Tipo: {{plan.plan_type?.name}}</span>
                                            </div>
                                            <div style="width: 100%;margin-top: 10px">
                                                <span class="isapre-name">Factor B: {{plan.base_factor | number:'.0-2':'es'}}</span>
                                            </div>
                                            <div style="width: 100%;margin-top: 10px">
                                                <span class="isapre-name">UF: {{plan.uf_value | number:'.0-2':'es'}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                                <div fxLayout='row warp' style="width: 100%;">
                                    <div class='plan-action-btn' fxFlex='100' style='margin-top: 2px;'>
                                        <div style='display: flex;justify-content: space-between;'>
                                            <button style="width:33%" class='secundary-action' (click)='openPdfPlanDialog(plan)' color="primary" mat-raised-button>
                                                    Ver plan
                                            </button>
                                            <button style="width:33%" class='secundary-action' (click)='openPdfPlanDialogCartilla(plan)' color="primary" mat-raised-button>
                                                    Beneficios
                                            </button>
                                            <button style="width:33%" class='solicitar-plan-btn' (click)='openContactForm(plan)' color="primary" mat-raised-button>
                                                Solicitar
                                        </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style='margin-top: 10px;' *ngIf='plan.price < this.get10percent()' class="alert alert-warning" role="alert">
                                <div>Este plan se encuentra debajo del precio mínimo permitido legalmente segun tus ingresos</div>
                            </div>
                        </mat-card>
                    </div>
                </ng-container>
            </div>
            <div [style]='"margin-bottom: 80px; bottom: 0; margin: auto; text-align: center; width: "+(seekerMain.offsetWidth-31)+"px"'>
                <pagination-controls *ngIf='plans' id='plans' (pageChange)="p = $event">
                </pagination-controls>
                <!-- <mat-paginator style="box-shadow: 0 1px 9px 0 rgb(34 41 47 / 67%) !important;" class='paginator' *ngIf='plans' [length]='plans.total' [pageSizeOptions]="[15, 30, 90, 180]" (page)="paginate($event)">
                </mat-paginator> -->

            </div>
        </div>
    </div>
</section>

<div style="display: none;">

    <div #isapre1 id='isapre-1'>
        <strong class="benefits-title">Beneficios de banmedica</strong>
        <div *ngFor='let profit of banmedicaProfits' class="benefit-container">
            <div style="width: 25px;">
                <fa-icon style='color: #eb072aab;' class='benefits-icon' [icon]="profit.icon"></fa-icon>
            </div>
            <span class='benefits-text'>{{profit.description}}</span>
        </div>
    </div>

    <div #isapre2 id='isapre-2'>
        <strong class="benefits-title">Beneficios de Consalud</strong>
        <div *ngFor='let profit of consaludProfits' class="benefit-container">
            <div style="width: 25px;">
                <fa-icon class="green-color" class='benefits-icon' [icon]="profit.icon"></fa-icon>
            </div>
            <span class='benefits-text'>{{profit.description}}</span>
        </div>
    </div>

    <div #isapre3 id='isapre-3'>
        <strong class="benefits-title">Beneficios de Colmena</strong>
        <div *ngFor='let profit of ColmenaProfits' class="benefit-container">
            <div style="width: 25px;">
                <fa-icon style='color: #036e8f;' class='benefits-icon' [icon]="profit.icon"></fa-icon>
            </div>
            <span class='benefits-text'>{{profit.description}}</span>
        </div>
    </div>

    <div #isapre4 id='isapre-4'>
        <strong class="benefits-title">Beneficios de Cruz Blanca</strong>
        <div *ngFor='let profit of cruzBlancaProfits' class="benefit-container">
            <div style="width: 25px;">
                <fa-icon class="green-color" class='benefits-icon' [icon]="profit.icon"></fa-icon>
            </div>
            <span class='benefits-text'>{{profit.description}}</span>
        </div>
    </div>

    <div #isapre5 id='isapre-5'>
        <strong class="benefits-title">Beneficios de Vidatres</strong>
        <div *ngFor='let profit of vidatresProfits' class="benefit-container">
            <div style="width: 25px;">
                <fa-icon class="green-color" class='benefits-icon' [icon]="profit.icon"></fa-icon>
            </div>
            <span class='benefits-text'>{{profit.description}}</span>
        </div>
    </div>
</div>

<a href='https://api.whatsapp.com/send/?phone=56995285187&text&app_absent=0' target='_blank' style='position: fixed;bottom: 13px;left: 13px;'>
    <div>
        <img src='https://tawk.link/60dd0d847f4b000ac03a6f80/var/chat_bubble/af7d1720316a13e954933f92ac801811c0e6ee2b'>
    </div>
    <div style='margin-top: -41px;margin-left: 32px;'>
        <img style='height: 60px;' src='https://img.icons8.com/office/452/whatsapp--v1.png'>
    </div>
</a>